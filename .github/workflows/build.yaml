name: Lua Busted Tests

on: [push, workflow_dispatch]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
      name: Check out repository code

    - name: Setup Lua
      uses: leafo/gh-actions-lua@v10
      with:
        luaVersion: '5.3'  # Specify the Lua version you need

    - name: Setup LuaRocks
      uses: leafo/gh-actions-luarocks@v4.3.0

    - name: Install Busted
      run: luarocks install ar-io-ao-0.1-1.rockspec

    - name: Run Busted Tests
      run: busted -o utfTerminal
